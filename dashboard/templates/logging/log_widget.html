{% load custom_filters %}

<div class="log-widget">
    {% if logs %}
        <div class="list-group list-group-flush">
            {% for log in logs %}
                <div class="list-group-item list-group-item-action py-2">
                    <div class="d-flex w-100 justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <span class="badge bg-{{ log.level|level_badge_class }} me-2">
                                <i class="{{ log.level|level_icon }}"></i>
                                {{ log.level }}
                            </span>
                            <small class="text-muted">{{ log.timestamp|date:"M d, H:i" }}</small>
                            <p class="mb-1 mt-1">{{ log.message|truncatechars:80 }}</p>
                            <small class="text-muted">{{ log.actor }}</small>
                        </div>
                        <a href="{% url 'log_detail' log.id %}" class="btn btn-sm btn-outline-primary ms-2">
                            <i class="fas fa-eye"></i>
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
        <div class="text-center mt-2">
            <a href="{% url 'object_logs' object|get_content_type_id object.id %}" 
               class="btn btn-sm btn-outline-secondary">
                <i class="fas fa-history"></i> View All Logs
            </a>
        </div>
    {% else %}
        <div class="text-center text-muted py-3">
            <i class="fas fa-inbox"></i>
            <p class="mb-0">No recent activity</p>
        </div>
    {% endif %}
</div>
