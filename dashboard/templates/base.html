{# templates/base.html #}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>{% block title %}KubePanel{% endblock %}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    {% block extra_head %}{% endblock %}
</head>
<body class="min-h-screen bg-gray-100 flex">

    {# --- Sidebar --- #}
    <aside class="w-64 bg-slate-900 text-gray-200 flex flex-col">
        <div class="p-6 text-2xl font-semibold">KubePanel</div>
        <nav class="flex-1 space-y-1 px-4">
            <a href="dashboard" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800 {% if section=='dashboard' %}bg-slate-800{% endif %}">
                <span class="i-lucide-layout-dashboard"></span> Dashboard
            </a>
            <a href="{% url 'kpmain' %}" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800 {% if section=='domains' %}bg-slate-800{% endif %}">
                <span class="i-lucide-server"></span> Domains
            </a>
            <a href="{% url 'list_mail_users' %}" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-mail"></span> E-mail accounts
            </a>
            <a href="{% url 'pods_status' %}" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-activity-square"></span> Live Cluster Status
            </a>
            <a href="{% url 'list_api_tokens' %}" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-cloud"></span> Cloudflare API Tokens
            </a>
            <a href="{% url 'zones_list' %}" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-globe"></span> DNS Zones
            </a>
            <a href="phpmyadmin" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-database"></span> PHPMyAdmin
            </a>
            <a href="webmail" class="flex items-center gap-3 px-3 py-2 rounded hover:bg-slate-800">
                <span class="i-lucide-mailbox"></span> Webmail
            </a>
        </nav>
        <footer class="p-4 text-xs text-gray-500">
            KubePanel – szerverzum.hu – EVOLUTIONET Kft. ©
        </footer>
    </aside>

    {# --- Main Content --- #}
    <div class="flex-1 flex flex-col">
        {# Top bar #}
        <header class="h-14 bg-white shadow flex items-center justify-end px-6 gap-6">
            <button class="relative">
                <span class="i-lucide-bell w-6 h-6"></span>
                <span class="absolute -top-1 -right-1 inline-flex h-4 w-4 items-center justify-center rounded-full bg-red-600 text-[10px] text-white">3</span>
            </button>
            <div class="flex items-center gap-2">
                <span class="i-lucide-user w-6 h-6"></span>
                <span>{{ request.user.username }}</span>
            </div>
        </header>

        <main class="flex-1 p-10">
            {% block content %}{% endblock %}
        </main>
    </div>

    {# --- Global Modal (HTMX target) --- #}
    <div id="modal-root"
         class="fixed inset-0 z-50 hidden items-center justify-center bg-black/50"
         hx-on="modal-close: this.classList.add('hidden')">
        <div class="bg-white w-full max-w-lg rounded-lg shadow-xl"
             hx-target="this"
             hx-swap="outerHTML">
            {# Modal content will be swapped in by HTMX #}
        </div>
    </div>

    {% block extra_js %}{% endblock %}
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
</body>
</html>

