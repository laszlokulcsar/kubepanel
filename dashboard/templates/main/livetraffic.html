{% extends "base.html" %}
{% block content %}
                        <main class="content">
                                <div class="container-fluid p-0">

                                        <h1 class="h3 mb-3"><strong>Settings</strong></h1>
                                        <div class="row">
                                                <div class="col-12 col-lg-12 col-xxl-12">
							<div class="card">
								<div class="card-header">
									<h5 class="card-title mb-0">Live Traffic Inspector</h5>
								</div>
								<div class="card-body">

    <table id="logsTable">
        <thead>
            <tr>
                <th>Time <br><input type="text" onkeyup="filterTable(0)" placeholder="Filter by Time"></th>
                <th>Host <br><input type="text" onkeyup="filterTable(1)" placeholder="Filter by Host"></th>
                <th>Forwarded For <br><input type="text" onkeyup="filterTable(2)" placeholder="Filter by Forwarded For"></th>
                <th>Status <br><input type="text" onkeyup="filterTable(3)" placeholder="Filter by Status"></th>
                <th>Method <br><input type="text" onkeyup="filterTable(4)" placeholder="Filter by Method"></th>
                <th>Path <br><input type="text" onkeyup="filterTable(5)" placeholder="Filter by Path"></th>
                <th>Duration <br><input type="text" onkeyup="filterTable(6)" placeholder="Filter by Duration"></th>
                <th>Body <br><input type="text" onkeyup="filterTable(7)" placeholder="Filter by Body"></th>
            </tr>
        </thead>
        <tbody>
            {% for log in logs %}
            <tr>
                <td>{{ log.time }}</td>
                <td>{{ log.vhost }}</td>
                <td>{{ log.x_forwarded_for }}</td>
                <td>{{ log.status }}</td>
                <td>{{ log.method }}</td>
                <td>{{ log.path }}</td>
                <td>{{ log.duration }}</td>
                <td>{{ log.request_body }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <script>
        function filterTable(columnIndex) {
            // Get the input element for the specific column
            const input = event.target;
            const filter = input.value.toLowerCase();
            const table = document.getElementById("logsTable");
            const rows = table.getElementsByTagName("tr");

            // Loop through all table rows and filter them
            for (let i = 1; i < rows.length; i++) { // Skip the header row
                const cell = rows[i].getElementsByTagName("td")[columnIndex];
                if (cell) {
                    const textValue = cell.textContent || cell.innerText;
                    rows[i].style.display = textValue.toLowerCase().includes(filter) ? "" : "none";
                }
            }
        }
    </script>									
								</div>
							</div>
                                                </div>
                                        </div>

                                </div>
                        </main>
{% endblock %}
